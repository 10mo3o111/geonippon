var P=Object.defineProperty;var H=e=>{throw TypeError(e)};var B=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var R=(e,t,n)=>B(e,typeof t!="symbol"?t+"":t,n),z=(e,t,n)=>t.has(e)||H("Cannot "+n);var d=(e,t,n)=>(z(e,t,"read from private field"),n?n.call(e):t.get(e)),m=(e,t,n)=>t.has(e)?H("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),C=(e,t,n,o)=>(z(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const E=document.getElementById("prefectures"),I=document.querySelector(".c_region__container"),N=document.getElementById("municipality-container"),D=document.getElementById("municipality");async function Q(){try{const e=await fetch("https://geolonia.github.io/japanese-addresses/api/ja.json");if(e.ok)return await e.json();throw new Error(`エラーが発生しました。code: ${e.status}`)}catch(e){return e instanceof Error&&(console.log(e),I&&(I.classList.add("error-message"),I.textContent="都道府県の情報を取得できませんでした。しばらくしてからもう一度お試しください。")),{}}}async function k(){const e=await Q();Object.keys(e).forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=t,E==null||E.append(n)}),E==null||E.addEventListener("change",()=>{var t;D.innerHTML="",N.style.display="none",E.value!==""&&(N.style.display="block",(t=e[E.value])==null||t.forEach(n=>{const o=document.createElement("option");o.value=n,o.textContent=n,D.append(o)}))})}var L,g,p,q,w,y;const T=class T{constructor(t){m(this,L);m(this,g);m(this,p);m(this,q);m(this,w);m(this,y);C(this,L,t.step1.question),C(this,g,t.step1.choices),C(this,p,t.step1.answer),C(this,q,t.step2.question),C(this,w,t.step2.choices),C(this,y,t.step2.answer)}get questionS1(){return d(this,L)}get choicesS1(){return d(this,g)}get answerS1(){return d(this,p)}get questionS2(){return d(this,q)}get choicesS2(){return d(this,w)}get answerS2(){return d(this,y)}isCorrectAnswer(t,n){if(n===T.STATUS.FIRST_CHECK)return d(this,p)===t?"正解":"不正解";if(n===T.STATUS.SECOND_CHECK)return d(this,y)===t?"正解":"不正解"}};L=new WeakMap,g=new WeakMap,p=new WeakMap,q=new WeakMap,w=new WeakMap,y=new WeakMap,R(T,"STATUS",{FIRST_CHECK:1,SECOND_CHECK:3});let A=T;const v=document.getElementById("prefectures"),b=document.querySelector(".c_quiz__questionText"),S=document.querySelector(".c_quiz__note"),c=document.querySelector(".c_quiz__list"),a=document.querySelector(".c_quiz__check"),l=document.querySelector(".c_quiz__retry"),r=document.querySelector(".c_quiz__result");let _=null;const f={FIRST:0,FIRST_CHECK:1,SECOND:2,SECOND_CHECK:3};let u=0;const X="都道府県を選ぶと、クイズが出てきます！",K="答えを1つ選んでください",U="解答結果がここに表示されます",$="クイズはおしまい！他の地域にも挑戦してみてね。";let F,O;a&&r&&l&&S&&a.addEventListener("click",()=>{r.classList.add("has-answer"),O===void 0?r.textContent=K:(r.textContent=`${O}`,u===f.FIRST_CHECK?(a.disabled=!0,l.disabled=!1,u=f.SECOND):u===f.SECOND_CHECK&&(a.disabled=!0,l.disabled=!0,S.textContent=$)),O=void 0});a&&r&&l&&c&&l.addEventListener("click",()=>{c.innerHTML="",r.classList.remove("has-answer"),r.textContent=U,f.SECOND===u&&(_&&j(_,u),u=f.SECOND_CHECK,M(),a.disabled=!1,l.disabled=!0)});async function Z(){try{const e=await fetch("/quiz.json");if(e.ok)return await e.json();throw new Error(`ステータスコード: ：${e.status}`)}catch(e){return console.error(e),{error:"クイズデータの取得に失敗しました"}}}async function G(){const e=await Z();v&&a&&r&&l&&c&&S&&b&&v.addEventListener("change",()=>{if(r.textContent="",r.classList.remove("has-answer"),!("error"in e))if(Object.hasOwn(e,v.value)){c.innerHTML="",u=f.FIRST,a.classList.remove("is-hidden"),l.classList.remove("is-hidden"),S.classList.remove("is-hidden"),a.disabled=!1;const t=e[v.value];_=new A(t),j(_,u),u=f.FIRST_CHECK,r.textContent=U,S.textContent=K,M()}else S==null||S.classList.add("is-hidden"),a.classList.add("is-hidden"),l.classList.add("is-hidden"),c.innerHTML="",b.textContent=X})}function j(e,t){let n=[],o="";f.FIRST===t?(n=e.choicesS1,o=e.questionS1):f.SECOND===t&&(n=e.choicesS2,o=e.questionS2),b&&(b.textContent=`${o}`),c&&(c.innerHTML=""),n.forEach(s=>{const i=document.createElement("label");i.classList.add("c_quiz__choice"),i.textContent=`${s}`;const h=document.createElement("input");h.setAttribute("type","radio"),h.setAttribute("name","quiz"),h.setAttribute("value",`${s}`);const x=document.createElement("span");x.classList.add("c_quiz__circle"),i.append(h,x),c==null||c.append(i)})}function M(){document.querySelectorAll('input[name="quiz"]').forEach(t=>{t.addEventListener("change",n=>{F=n.target.value,_&&(O=_.isCorrectAnswer(F,u))})})}k();G();
